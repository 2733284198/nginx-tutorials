= Nginx 配置指令的执行顺序（九） =

紧接在 C<server-rewrite> 阶段后边的是 C<find-config>
阶段。这个阶段一般并不会有 Nginx 模块注册任何处理程序，而是由 Nginx
核心来完成 C<location> 配置块与请求 URI 之间的配对工作。换句话
说，在此阶段之前，请求并没有与任何 C<location> 配置块建立关联。因此
，对于运行在 C<find-config> 阶段之前的 C<post-read>
和 C<server-rewrite> 阶段来说，只有 C<server> 配置
块以及更外层作用域的配置指令才会起作用。这就是为什么只有写在 C<server>
配置块中的 L<ngx_rewrite> 模块的指令才会运行在 C<server-rewrite>
阶段，这也是为什么前面所有例子中的 L<ngx_realip> 模块的指令也都特
意写在了 C<server> 配置块中以确实其注册在 C<post-read>
阶段的处理程序起作用。

